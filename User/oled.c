#include "oled.h"
#include "stm32f3xx_hal.h"
#include "main.h"


I2C_HandleTypeDef hi2c1;

#define IIC_ADR_oled 0x78
#define Timeout 0xff

const unsigned char  *point;
const unsigned char  OLED_init_cmd[25]=
{
  /*0xae,0X00,0X10,0x40,0X81,0XCF,0xff,0xa1,0xa4,
  0xA6,0xc8,0xa8,0x3F,0xd5,0x80,0xd3,0x00,0XDA,0X12,
  0x8d,0x14,0xdb,0x40,0X20,0X02,0xd9,0xf1,0xAF*/
       0xAE,//关闭显示
       0xD5,//设置时钟分频因子,震荡频率
       0x80,  //[3:0],分频因子;[7:4],震荡频率
       0xA8,//设置驱动路数
       0X3F,//默认0X3F(1/64)
       0xD3,//设置显示偏移
       0X00,//默认为0
       0x40,//设置显示开始行 [5:0],行数.
       0x8D,//电荷泵设置
       0x14,//bit2，开启/关闭
       0x20,//设置内存地址模式
       0x02,//[1:0],00，列地址模式;01，行地址模式;10,页地址模式;默认10;
       0xA1,//段重定义设置,bit0:0,0->0;1,0->127;
       0xC8,//设置COM扫描方向;bit3:0,普通模式;1,重定义模式 COM[N-1]->COM0;N:驱动路数
       0xDA,//设置COM硬件引脚配置
       0x12,//[5:4]配置
       0x81,//对比度设置
       0xEF,//1~255;默认0X7F (亮度设置,越大越亮)
       0xD9,//设置预充电周期
       0xf1,//[3:0],PHASE 1;[7:4],PHASE 2;
       0xDB,//设置VCOMH 电压倍率
       0x30,//[6:4] 000,0.65*vcc;001,0.77*vcc;011,0.83*vcc;
       0xA4,//全局显示开启;bit0:1,开启;0,关闭;(白屏/黑屏)
       0xA6,//设置显示方式;bit0:1,反相显示;0,正常显示
       0xAF,//开启显示
};
/*
unsigned char  picture_tab[]={
		0x00,0x70,0x88,0x08,0x08,0x08,0x38,0x00,0x00,0x38,0x20,0x21,0x21,0x22,0x1C,0x00,
		0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x22,0x22,0x22,0x22,0x13,0x00,
		0x00,0x80,0x80,0xE0,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x1F,0x20,0x20,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x08,0x78,0x88,0x00,0x00,0xC8,0x38,0x08,0x00,0x00,0x07,0x38,0x0E,0x01,0x00,0x00,
		0x21,0xFD,0xFD,0xA1,0xA1,0xA1,0x21,0x21,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,
		0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xE0,0xF0,0x3C,0x1E,0xFE,0xFE,0xFE,0x00,
		0x00,0x00,0x00,0x00,0x00,0x04,0x04,0xFE,0xFE,0xFE,0x00,0x00,0x00,0x00,0xBC,0xFE,
		0xF6,0x62,0xF6,0xFE,0xBC,0x08,0x02,0x02,0x02,0x82,0xE2,0xFA,0x7E,0x1E,0x02,0x0E,
		0x7E,0xFE,0xF0,0x80,0x80,0xF0,0xFE,0x7E,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x07,0x07,0x02,0x02,0x02,
		0x1F,0x1F,0x12,0x12,0x12,0x13,0x1B,0x1F,0x1C,0x1C,0x1F,0x1F,0x13,0x10,0x10,0x10,
		0x10,0x1F,0x1F,0x10,0x13,0x17,0x16,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x0C,0x0C,
		0x0C,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x01,0x01,0x01,0x0F,0x0F,0x0F,0x01,
		0x0C,0x0C,0x0C,0x00,0x00,0x08,0x08,0x0F,0x0F,0x0F,0x08,0x08,0x08,0x07,0x0F,0x0F,
		0x0C,0x08,0x0C,0x0F,0x07,0x07,0x00,0x00,0x0E,0x0F,0x0F,0x01,0x00,0x00,0x00,0x00,
		0x00,0x01,0x0F,0x0F,0x0F,0x0F,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xF0,0xF0,0x90,0x90,0x90,
		0xFC,0xFC,0x90,0x90,0x90,0xF0,0xF0,0xF0,0x00,0x6C,0xEC,0xDC,0xD8,0xC8,0xE8,0xF8,
		0xBC,0x9C,0x8C,0xA8,0xE8,0xE8,0xC8,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,
		0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x18,0x08,0x08,0x98,0xF8,0xF0,0x60,
		0x00,0x00,0x00,0x00,0xE0,0xF0,0xF8,0x18,0x08,0x18,0xF8,0xF0,0xE0,0xE0,0xF0,0xF8,
		0x18,0x08,0x18,0xF8,0xF0,0xE0,0x80,0xE0,0xF0,0xB8,0x98,0x88,0x88,0x88,0x00,0x00,
		0x00,0x80,0xF0,0xF8,0x78,0xF8,0xF0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x1F,0x1F,0x08,0x08,0x08,
		0x7F,0x7F,0x48,0x48,0x48,0x4F,0x6F,0x7F,0x70,0x60,0x7E,0x7E,0x6E,0x78,0x3E,0x1E,
		0x00,0x7E,0x7E,0x3E,0x7E,0x7F,0x79,0x79,0x18,0x00,0x00,0x00,0x00,0x00,0x30,0x30,
		0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x30,0x38,0x3C,0x2E,0x27,0x23,0x21,0x20,
		0x30,0x30,0x30,0x00,0x0F,0x1F,0x3F,0x30,0x20,0x30,0x3F,0x1F,0x0F,0x0F,0x1F,0x3F,
		0x30,0x20,0x30,0x3F,0x1F,0x0F,0x0F,0x1F,0x3F,0x31,0x20,0x31,0x3F,0x1F,0x0F,0x38,
		0x3E,0x3F,0x0F,0x05,0x04,0x07,0x0F,0x3F,0x3E,0x38,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};
*/

const unsigned char  num_tab[12][16]={
		/*--  文字:  0  --*/
		/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
		0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x0F,0x10,0x20,0x20,0x10,0x0F,0x00,

		/*--  文字:  1  --*/
		/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
		0x00,0x10,0x10,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,

		/*--  文字:  2  --*/
		/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
		0x00,0x70,0x08,0x08,0x08,0x88,0x70,0x00,0x00,0x30,0x28,0x24,0x22,0x21,0x30,0x00,

		/*--  文字:  3  --*/
		/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
		0x00,0x30,0x08,0x88,0x88,0x48,0x30,0x00,0x00,0x18,0x20,0x20,0x20,0x11,0x0E,0x00,

		/*--  文字:  4  --*/
		/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
		0x00,0x00,0xC0,0x20,0x10,0xF8,0x00,0x00,0x00,0x07,0x04,0x24,0x24,0x3F,0x24,0x00,

		/*--  文字:  5  --*/
		/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
		0x00,0xF8,0x08,0x88,0x88,0x08,0x08,0x00,0x00,0x19,0x21,0x20,0x20,0x11,0x0E,0x00,

		/*--  文字:  6  --*/
		/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
		0x00,0xE0,0x10,0x88,0x88,0x18,0x00,0x00,0x00,0x0F,0x11,0x20,0x20,0x11,0x0E,0x00,

		/*--  文字:  7  --*/
		/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
		0x00,0x38,0x08,0x08,0xC8,0x38,0x08,0x00,0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x00,

		/*--  文字:  8  --*/
		/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
		0x00,0x70,0x88,0x08,0x08,0x88,0x70,0x00,0x00,0x1C,0x22,0x21,0x21,0x22,0x1C,0x00,

		/*--  文字:  9  --*/
		/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
		0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x00,0x31,0x22,0x22,0x11,0x0F,0x00,
		/*--  文字:  .  --*/ //10
		/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,0x00,0x00,

		/*--  文字:     --*/ //11 不显示
		/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};
const unsigned char  txt_tab[12][16]={
		/*--  文字:  S  --*/ //0
		/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
		0x00,0x70,0x88,0x08,0x08,0x08,0x38,0x00,0x00,0x38,0x20,0x21,0x21,0x22,0x1C,0x00,

		/*--  文字:  e  --*/  //1
		/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
		0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x22,0x22,0x22,0x22,0x13,0x00,

		/*--  文字:  t  --*/ //2
		/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
		0x00,0x80,0x80,0xE0,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x1F,0x20,0x20,0x00,0x00,

		/*--  文字:  V  --*/ //3
		/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
		0x08,0x78,0x88,0x00,0x00,0xC8,0x38,0x08,0x00,0x00,0x07,0x38,0x0E,0x01,0x00,0x00,

		/*--  文字:  I  --*/ //4
		/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
		0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,

		/*--  文字:  O  --*/ //5
		/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
		0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x10,0x20,0x20,0x20,0x10,0x0F,0x00,

		/*--  文字:  u  --*/ //6
		/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
		0x80,0x80,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x1F,0x20,0x20,0x20,0x10,0x3F,0x20,

		/*--  文字:  R  --*///7
		/*--  ËÎÌå12;  ´Ë×ÖÌåÏÂ¶ÔÓ¦µÄµãÕóÎª£º¿íx¸ß=8x16   --*/
		0x08,0xF8,0x88,0x88,0x88,0x88,0x70,0x00,0x20,0x3F,0x20,0x00,0x03,0x0C,0x30,0x20,

		/*--  ÎÄ×Ö:  m  --*///8
		/*--  ËÎÌå12;  ´Ë×ÖÌåÏÂ¶ÔÓ¦µÄµãÕóÎª£º¿íx¸ß=8x16   --*/
		0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x20,0x3F,0x20,0x00,0x3F,0x20,0x00,0x3F,

		/*--  ÎÄ×Ö:  s  --*///9
		/*--  ËÎÌå12;  ´Ë×ÖÌåÏÂ¶ÔÓ¦µÄµãÕóÎª£º¿íx¸ß=8x16   --*/
		0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x33,0x24,0x24,0x24,0x24,0x19,0x00,

		/*--  ÎÄ×Ö:  R  --*/ //10
		/*--  ËÎÌå12;  ´Ë×ÖÌåÏÂ¶ÔÓ¦µÄµãÕóÎª£º¿íx¸ß=8x16   --*/
		0x08,0xF8,0x88,0x88,0x88,0x88,0x70,0x00,0x20,0x3F,0x20,0x00,0x03,0x0C,0x30,0x20,

		/*--  ÎÄ×Ö:  L  --*/ //11
		/*--  ËÎÌå12;  ´Ë×ÖÌåÏÂ¶ÔÓ¦µÄµãÕóÎª£º¿íx¸ß=8x16   --*/
		0x08,0xF8,0x08,0x00,0x00,0x00,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x20,0x30,0x00,

};

void Column_set(unsigned char column)
  {
	unsigned char pData[]={0,0};
	pData[0]=0x10|(column>>4);
	pData[1]=0x00|(column&0x0f);
	HAL_I2C_Mem_Write(&hi2c1,IIC_ADR_oled,0x00,I2C_MEMADD_SIZE_8BIT,pData,sizeof(pData),Timeout);
  }

void Page_set(unsigned char page)
  {
	unsigned char pData[]={0};
	pData[0]=0xb0+page;
	HAL_I2C_Mem_Write(&hi2c1,IIC_ADR_oled,0x00,I2C_MEMADD_SIZE_8BIT,pData,sizeof(pData),Timeout);
  }

void OLED_clear(void)
  {
    unsigned char page,column;
    unsigned char pData[128]={};
    for(column=0;column<128;column++)	//构建全空数据
      {
  	  pData[column]=0;
      }
    for(page=0;page<8;page++)             //page loop
      { 
          Page_set(page);
          Column_set(0);
          HAL_I2C_Mem_Write(&hi2c1,IIC_ADR_oled,0x40,I2C_MEMADD_SIZE_8BIT,pData,sizeof(pData),Timeout);
      }
  }

void OLED_full(void)
  {
    unsigned char page,column;
    unsigned char pData[128]={};
    for(column=0;column<128;column++)	//构建全空数据
      {
  	  pData[column]=0xff;
      }
    for(page=0;page<8;page++)             //page loop
      { 
          Page_set(page);
          Column_set(0);
          HAL_I2C_Mem_Write(&hi2c1,IIC_ADR_oled,0x40,I2C_MEMADD_SIZE_8BIT,pData,sizeof(pData),Timeout);
      }
  }

void OLED_init(void)
  {
	HAL_I2C_Mem_Write(&hi2c1,IIC_ADR_oled,0x00,I2C_MEMADD_SIZE_8BIT,OLED_init_cmd,sizeof(OLED_init_cmd),Timeout);
  }

void Picture_display(const unsigned char *ptr_pic)
  {
    unsigned char page,column;
    unsigned char pData[128]={};
    for(page=0;page<(64/8);page++)        //page loop
      { 
	Page_set(page);
	Column_set(0);
	for(column=0;column<8;column++)	//因为字宽为8
          {
		pData[column]=(*ptr_pic++);
          }
	//Column_set(column*8);
	HAL_I2C_Mem_Write(&hi2c1,IIC_ADR_oled,0x40,I2C_MEMADD_SIZE_8BIT,pData,sizeof(pData),Timeout);

      }
  }
void TXT_display(unsigned char txt_row,unsigned char txt_col,const unsigned char *ptr_txt)//显示文字
  {
    unsigned char page,column;
    unsigned char pData[8]={};
    for(page=txt_row*2-2;page<(txt_row*2);page++)        //page loop
      {
	Page_set(page);
	Column_set(txt_col*8);
	for(column=0;column<8;column++)	//column loop
          {
		pData[column]=(*ptr_txt++);
          }
	HAL_I2C_Mem_Write(&hi2c1,IIC_ADR_oled,0x40,I2C_MEMADD_SIZE_8BIT,pData,sizeof(pData),Timeout);
      }
  }

void Picture_ReverseDisplay(const unsigned char *ptr_pic)
{
    unsigned char page,column,data;
    for(page=0;page<(64/8);page++)        //page loop
      { 
	Page_set(page);
	Column_set(0);
	for(column=0;column<128;column++)	//column loop
          {
            data=*ptr_pic++;
            data=~data;
            OLED_send_data(data);
          }
      }
  }

void Display_mnu()//显示菜单
{

	uint8_t txt_row,txt_col;
	txt_row=1;//行
	txt_col=5;//列

    point= &txt_tab[10];//R
	TXT_display(txt_row,1,point);
	point= &txt_tab[8];//m
	TXT_display(txt_row,2,point);
	point= &txt_tab[9];//s
	TXT_display(txt_row,3,point);
	point= &txt_tab[3];//V
	TXT_display(txt_row,4,point);

	txt_row++;

	point= &txt_tab[10];//R
	TXT_display(txt_row,1,point);

	point= &txt_tab[8];//m
	TXT_display(txt_row,2,point);

	point= &txt_tab[9];//s
	TXT_display(txt_row,3,point);

	point= &txt_tab[4];//I
	TXT_display(txt_row,4,point);

	txt_row++;

    point= &txt_tab[10];//R
	TXT_display(txt_row,1,point);
	point= &txt_tab[9];//s
	TXT_display(txt_row,2,point);
	//point= &txt_tab[2];//t
	//TXT_display(txt_row,3,point);
	//point= &txt_tab[3];//V
	//TXT_display(txt_row,4,point);

	txt_row++;

    point= &txt_tab[11];//L
	TXT_display(txt_row,1,point);
	point= &txt_tab[9];//S
	TXT_display(txt_row,2,point);
	//point= &txt_tab[2];//t
	//TXT_display(txt_row,3,point);
	//point= &txt_tab[4];//I
	//TXT_display(txt_row,4,point);
}


void Display_int(void)
{ 
  OLED_init();
  //OLED_full();
  //delay_ms(1000);
  HAL_Delay(1);
  OLED_clear();
 // while(1)
  {
    //delay_ms(3000);
    //Picture_ReverseDisplay(point);
    //delay_ms(3000);
  }
  Display_mnu();
}

void Display_scan(uint16_t Volage , uint16_t current)
{
	//point= &picture_tab[0];//num1_tab
	//Picture_display(point);

	uint8_t n,t,h,th,tt;
	uint8_t txt_row,txt_col;
	txt_row=1;//行
	txt_col=6;//列

	n=Volage%10;//个位
	t=Volage/10%10;//十位
	h=Volage/100%10;//百位
	th=Volage/1000%10;//千位
	tt=Volage/10000%10;//十千位

	txt_row=3;//行

    //十千位
	if(tt==0)
		{point= &num_tab[11];}//不显示
	else
	    {point= &num_tab[tt];}
    TXT_display(txt_row,txt_col,point);
	txt_col++;
	//千位
	point= &num_tab[th];
	TXT_display(txt_row,txt_col,point);
	txt_col++;
	//小数点
	point= &num_tab[10];
	TXT_display(txt_row,txt_col,point);
	txt_col++;
	//百位
	point= &num_tab[h];
	TXT_display(txt_row,txt_col,point);
	txt_col++;
	//十位
	point= &num_tab[t];
	TXT_display(txt_row,txt_col,point);
	txt_col++;
	//个位
	point= &num_tab[n];
	TXT_display(txt_row,txt_col,point);

	txt_row=4;//行
	txt_col=6;//列


	n=current%10;//个位
	t=current/10%10;//十位
	h=current/100%10;//百位
	th=current/1000%10;//千位
	tt=current/10000%10;//十千位

    //十千位
	if(tt==0)
		{point= &num_tab[11];}//不显示
	else
	    {point= &num_tab[tt];}
	TXT_display(txt_row,txt_col,point);
	txt_col++;
	//千位
	point= &num_tab[th];
	TXT_display(txt_row,txt_col,point);
	txt_col++;
	//小数点
	point= &num_tab[10];
	TXT_display(txt_row,txt_col,point);
	txt_col++;
	//百位
	point= &num_tab[h];
	TXT_display(txt_row,txt_col,point);
	txt_col++;
	//十位
	point= &num_tab[t];
	TXT_display(txt_row,txt_col,point);
	txt_col++;
	//个位
	point= &num_tab[n];
	TXT_display(txt_row,txt_col,point);
}


void Display_SET_scan(uint16_t V , uint16_t c)
{
	//point= &picture_tab[0];//num1_tab
	//Picture_display(point);

	uint8_t n,t,h,th,tt;
	uint8_t txt_row,txt_col;
	txt_row=1;//行
	txt_col=6;//列

	n=V%10;//个位
	t=V/10%10;//十位
	h=V/100%10;//百位
	th=V/1000%10;//千位
	tt=V/10000%10;//十千位

	//txt_row=3;//行

    //十千位
	if(tt==0)
		{point= &num_tab[11];}//不显示
	else
	    {point= &num_tab[tt];}
    TXT_display(txt_row,txt_col,point);
	txt_col++;
	//千位
	point= &num_tab[th];
	TXT_display(txt_row,txt_col,point);
	txt_col++;
	//小数点
	point= &num_tab[10];
	TXT_display(txt_row,txt_col,point);
	txt_col++;
	//百位
	point= &num_tab[h];
	TXT_display(txt_row,txt_col,point);
	txt_col++;
	//十位
	point= &num_tab[t];
	TXT_display(txt_row,txt_col,point);
	txt_col++;
	//个位
	point= &num_tab[n];
	TXT_display(txt_row,txt_col,point);

	txt_row=2;//行
	txt_col=6;//列


	n=c%10;//个位
	t=c/10%10;//十位
	h=c/100%10;//百位
	th=c/1000%10;//千位
	tt=c/10000%10;//十千位

    //十千位
	if(tt==0)
		{point= &num_tab[11];}//不显示
	else
	    {point= &num_tab[tt];}
	TXT_display(txt_row,txt_col,point);
	txt_col++;
	//千位
	point= &num_tab[th];
	TXT_display(txt_row,txt_col,point);
	txt_col++;
	//小数点
	point= &num_tab[10];
	TXT_display(txt_row,txt_col,point);
	txt_col++;
	//百位
	point= &num_tab[h];
	TXT_display(txt_row,txt_col,point);
	txt_col++;
	//十位
	point= &num_tab[t];
	TXT_display(txt_row,txt_col,point);
	txt_col++;
	//个位
	point= &num_tab[n];
	TXT_display(txt_row,txt_col,point);
}

